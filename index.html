<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>G·ª≠i H·ªìng Anh</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@700;800&family=Quicksand:wght@600;700&display=swap');

  /* RESET */
  body, html {
    margin: 0; padding: 0;
    width: 100%; height: 100%;
    overflow: hidden; 
    /* CHUY·ªÇN M√ÄU N·ªÄN V√ÄO BODY ƒê·ªÇ KH√îNG CHE M·∫§T TIM */
    background: radial-gradient(circle at center, #2b1055 0%, #000000 100%);
    font-family: 'Quicksand', sans-serif;
  }

  /* --- FULL SCREEN LAYERS --- */
  .full-screen-layer {
    position: fixed; top: 0; left: 0; right: 0; bottom: 0;
    width: 100%; height: 100%;
    display: flex; flex-direction: column;
    justify-content: center; align-items: center;
    /* Z-INDEX QUAN TR·ªåNG: Container ch·ª©a c·ª≠a s·ªï ph·∫£i cao h∆°n tim bay */
    z-index: 100; 
  }

  /* --- PC TWEAK --- */
  @media (min-width: 768px) {
    .full-screen-layer {
      justify-content: flex-start !important; 
      padding-top: 15vh; 
    }
  }

  /* --- M√ÄN H√åNH CH·ªú --- */
  #intro-screen {
    background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
    z-index: 2000; transition: opacity 0.5s;
  }
  
  /* Container ch√≠nh gi·ªù trong su·ªët ƒë·ªÉ nh√¨n th·∫•y tim bay ·ªü body */
  #main-container {
    background: transparent; 
  }

  /* --- C·ª¨A S·ªî CH√çNH --- */
  #love-window {
    position: relative;
    width: 90%; max-width: 450px;
    background: rgba(255, 255, 255, 0.99); /* N·ªÅn ƒë·ª•c ƒë·ªÉ che tim khi bay qua */
    padding: 30px 25px;
    border-radius: 25px;
    box-shadow: 0 0 60px rgba(255, 105, 180, 0.6);
    text-align: left; 
    transform: scale(0);
    transition: transform 0.6s cubic-bezier(0.2, 0.8, 0.2, 1.2);
    max-height: 85vh;
    overflow-y: auto; scrollbar-width: none;
    
    /* Z-INDEX 500: Cao nh·∫•t, ƒë√® l√™n tim bay */
    z-index: 500;
  }
  #love-window::-webkit-scrollbar { display: none; }

  /* Avatar & Header */
  .chat-header {
    display: flex; align-items: center; margin-bottom: 25px;
    border-bottom: 2px solid #f0f0f0; padding-bottom: 15px;
  }
  .avatar {
    width: 55px; height: 55px;
    border-radius: 50%; background: #ffdde1;
    display: flex; justify-content: center; align-items: center;
    font-size: 28px; border: 3px solid #ff4757; margin-right: 15px;
  }
  .window-title { 
    color: #222; font-family: 'Montserrat', sans-serif; 
    font-size: 22px; margin: 0; font-weight: 800;
  }
  .status-dot {
    height: 12px; width: 12px; background-color: #2ecc71;
    border-radius: 50%; display: inline-block; margin-left: 5px; border: 2px solid #fff;
  }

  /* --- KHU V·ª∞C G√ï CH·ªÆ --- */
  .typing-area {
    font-family: 'Quicksand', sans-serif; 
    font-size: 20px; font-weight: 600;
    line-height: 1.6; color: #333;
    min-height: 100px; margin-bottom: 30px;
  }
  .cursor {
    display: inline-block; width: 3px; height: 24px;
    background-color: #ff4757; margin-left: 3px;
    animation: blink 0.8s infinite; vertical-align: sub;
  }
  @keyframes blink { 0%, 100% { opacity: 1; } 50% { opacity: 0; } }

  /* --- N√öT B·∫§M --- */
  .btn-group {
    display: flex; justify-content: center; gap: 12px;
    margin-top: 20px; 
    opacity: 0; pointer-events: none; 
    transition: opacity 0.5s;
  }
  .btn {
    padding: 14px 24px; border: none; border-radius: 12px;
    font-size: 17px; font-weight: 700; cursor: pointer;
    flex: 1; white-space: nowrap;
    user-select: none; -webkit-tap-highlight-color: transparent;
    transition: transform 0.1s;
  }
  .btn:active { transform: scale(0.95); }
  .btn-yes { background: #ff4757; color: white; box-shadow: 0 4px 15px rgba(255, 71, 87, 0.4); }
  .btn-no { background: #f1f2f6; color: #57606f; }

  /* Intro Button */
  .intro-btn {
    padding: 20px 40px; font-size: 22px; background: #fff; color: #ff6b6b;
    border: none; border-radius: 50px; font-family: 'Montserrat', sans-serif; font-weight: 800;
    box-shadow: 0 10px 25px rgba(255, 107, 107, 0.4);
    animation: pulse 1.5s infinite; cursor: pointer;
    z-index: 3000;
  }

  /* --- TIM BAY --- */
  .floater { 
    position: absolute; bottom: -100px; 
    animation: floatUp linear forwards; 
    
    /* Z-INDEX 10: 
       - Cao h∆°n background (0) -> Nh√¨n th·∫•y ƒë∆∞·ª£c
       - Th·∫•p h∆°n Love Window (500) -> Bay ra sau l∆∞ng c·ª≠a s·ªï
    */
    z-index: 10; 
    
    pointer-events: none; 
  }
  @keyframes floatUp { to { transform: translateY(-120vh) rotate(360deg); opacity: 0; } }
  
  /* Mobile Fix */
  @media (max-width: 600px) {
    #love-window { width: 88%; padding: 25px 20px; }
    .typing-area { font-size: 19px; }
  }
</style>
</head>
<body>

  <audio id="bg-music" loop>
    <source src="nhac.mp3" type="audio/mp3">
  </audio>

  <div id="intro-screen" class="full-screen-layer">
    <button class="intro-btn" onclick="startJourney()">üíå M·ªü th∆∞ g·ª≠i H·ªìng Anh</button>
  </div>

  <div id="main-container" class="full-screen-layer" style="opacity:0; pointer-events:none;">
    
    <div id="love-window">
      <div class="chat-header">
        <div class="avatar" id="win-avatar">üíª</div>
        <div>
          <h2 class="window-title" id="win-title">G·ª≠i H·ªìng Anh <span class="status-dot"></span></h2>
          <span style="font-size: 13px; color: #888; font-weight: 600;">V·ª´a truy c·∫≠p</span>
        </div>
      </div>
      
      <div class="typing-area">
        <span id="typewriter"></span><span class="cursor"></span>
      </div>
      
      <div class="btn-group" id="actions">
        <button class="btn btn-yes" onclick="sheSaidYes()">ƒê·ªìng √Ω ‚ù§Ô∏è</button>
        <button class="btn btn-no" onclick="canSuyNghi()">Suy nghƒ© th√™m ü§î</button>
      </div>
    </div>
  </div>

<script>
  const speed = 35; 
  let typingTimer = null;

  function startJourney() {
    const audio = document.getElementById('bg-music');
    audio.volume = 0.8; 
    audio.play().catch(e => console.log(e));

    document.getElementById('intro-screen').style.opacity = '0';
    document.getElementById('intro-screen').style.pointerEvents = 'none';
    
    const main = document.getElementById('main-container');
    main.style.opacity = '1';
    main.style.pointerEvents = 'auto';
    
    // T·∫°o tim bay ngay l·∫≠p t·ª©c
    createFloater();
    setInterval(createFloater, 400);
    
    setTimeout(() => {
      document.getElementById('love-window').style.transform = 'scale(1)';
      const msg = "Code c√≥ th·ªÉ s·ª≠a l·ªói, nh∆∞ng t√¨nh c·∫£m d√†nh cho em l√† ngo·∫°i l·ªá.<br><br><b>L√†m ng∆∞·ªùi y√™u anh nh√©?</b>";
      startTyping(msg);
    }, 600);
  }

  function startTyping(text, showButtons = true) {
    const typeElement = document.getElementById("typewriter");
    const actionGroup = document.getElementById("actions");
    const cursor = document.querySelector('.cursor');
    
    typeElement.innerHTML = "";
    actionGroup.style.opacity = "0";
    actionGroup.style.pointerEvents = "none";
    cursor.style.display = "inline-block";
    
    let i = 0;
    
    function type() {
      if (i < text.length) {
        if (text.charAt(i) === '<') {
          let tag = "";
          while (text.charAt(i) !== '>' && i < text.length) {
            tag += text.charAt(i);
            i++;
          }
          tag += '>';
          i++;
          typeElement.innerHTML += tag;
        } else {
          typeElement.innerHTML += text.charAt(i);
          i++;
        }
        typingTimer = setTimeout(type, speed);
      } else {
        if (showButtons) {
          actionGroup.style.opacity = "1";
          actionGroup.style.pointerEvents = "auto";
        }
        setTimeout(() => { cursor.style.display = 'none'; }, 2000);
      }
    }
    type();
  }

  function sheSaidYes() {
    document.getElementById('win-avatar').innerHTML = "üíç";
    document.getElementById('win-avatar').style.borderColor = "#ff4757";
    document.getElementById('win-avatar').style.background = "#fff";
    document.getElementById('win-title').innerText = "Ch·ªët ƒë∆°n!";
    document.getElementById('win-title').style.color = "#ff4757";

    const msg = "Tuy·ªát v·ªùi!<br>Anh h·ª©a s·∫Ω kh√¥ng l√†m em th·∫•t v·ªçng.<br><br><b style='color:#ff4757; font-size:24px'>Y√™u em! ‚ù§Ô∏è</b>";
    startTyping(msg, false); 

    for(let j=0; j<50; j++) { 
        setTimeout(() => createFloater(true), j * 50); 
    }
  }

  function canSuyNghi() {
    const msg = "<span style='color:#555'>Anh hi·ªÉu m√†. Chuy·ªán quan tr·ªçng c·∫ßn suy nghƒ© k·ªπ.<br><br>Anh s·∫Ω ƒë·ª£i c√¢u tr·∫£ l·ªùi t·ª´ em. ƒê·ª´ng ƒë·ªÉ anh ƒë·ª£i l√¢u qu√° nh√©! ^^</span>";
    startTyping(msg, false);
  }

  const loves = ["‚ù§Ô∏è", "üíñ", "Code", "Love", "üíû", "üåπ"];
  function createFloater(isExplosion = false) {
    const el = document.createElement('div');
    el.classList.add('floater');
    el.innerText = loves[Math.floor(Math.random() * loves.length)];
    el.style.left = Math.random() * 95 + "vw";
    el.style.fontSize = (Math.random() * 40 + 30) + "px"; 
    el.style.color = Math.random() > 0.5 ? "#ff7675" : "#fff";
    
    const duration = isExplosion ? Math.random() * 2 + 1 : Math.random() * 4 + 3;
    el.style.animationDuration = duration + "s";
    
    document.body.appendChild(el);
    setTimeout(() => { el.remove(); }, duration * 1000);
  }
</script>

</body>
</html>